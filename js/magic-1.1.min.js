
$(document).ready(function(){function showSpinner(){$('div.loading').show();}
function hideSpinner(){$('div.loading').fadeOut('fast');}
$('div.jqueryError').hide();function showError(errorText){$('div.jqueryError').fadeIn('fast');if(errorText.length>0){$('.jqueryErrorText').html(errorText).show();}
hideSpinner();}
function hideError(){$('.jqueryErrorText').html();$('div.jqueryError').fadeOut('fast');}
$(document).on("click","#hideError",function(){hideError();return false;});$('.disabled a').click(function(){return false;});function hideTooltips(){$('.tooltip').hide();}
function showPopup(pClass){$('#popupOverlay').fadeIn('fast');$('.'+pClass).fadeIn('fast');$('body').addClass('stop-scrolling');}
function hidePopup(pClass){$('.'+pClass).fadeOut('fast');}
function hidePopups(){$('#popupOverlay').fadeOut('fast');$('.popup').fadeOut('fast');$('body').removeClass('stop-scrolling');$('.popup_w700').css("z-index","100");hideSpinner();}
function hidePopup2(){$('.popup_w400').fadeOut('fast');$('.popup_w500').fadeOut('fast');$('.popup_w700').css("z-index","100");hideSpinner();}
$(document).on("click","#popupOverlay, .hidePopups",function(){hidePopups();});$(document).on("click","button.hidePopup2",function(){hidePopup2();});$('a.disabled, button.disabled').click(function(){return false;});$('body').on('touchstart.dropdown','.dropdown-menu',function(e){e.stopPropagation();});function randomPass(){var chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";var pass="";var x;var i;for(x=0;x<10;x++){i=Math.floor(Math.random()*62);pass+=chars.charAt(i);}
return pass;}
$(document).on("click",".selfDestruct",function(){$(this).parent('div').fadeOut('fast');});function createCookie(name,value,days){var date;var expires;if(days){date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString();}
else{}
document.cookie=name+"="+value+expires+"; path=/";}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)===0)return c.substring(nameEQ.length,c.length);}
return null;}
$(function(){$(".popup").draggable({handle:".pHeader"});});if($('#dashboard').length>0){$('div[id^="w-"]').each(function(){var w=$(this).attr('id');w=w.replace("w-","");$.post('site/dashboard/widgets/'+w+'.php',function(data){$("#w-"+w+' .hContent').html(data);}).fail(function(xhr,textStatus,errorThrown){$("#w-"+w+' .hContent').html('<blockquote style="margin-top:20px;margin-left:20px;">File not found!</blockquote>');});});}
$(document).on('click','.add-new-widget',function(){showSpinner();$.post('site/dashboard/widgetPopup.php',function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('click',"i.remove-widget",function(){$(this).parent().parent().fadeOut('fast').remove();});$(document).on('click','#sortablePopup li a.widget-add',function(){var wid=$(this).attr('id');var wsize=$(this).attr('data-size');var wtitle=$(this).attr('data-htitle');var data='<div class="row-fluid"><div class="span'+wsize+' widget-dash" id="'+wid+'"><div class="inner movable"><h4>'+wtitle+'</h4><div class="hContent"></div></div></div></div>';$('#dashboard').append(data);w=wid.replace("w-","");$.post('site/dashboard/widgets/'+w+'.php',function(data){$("#"+wid+' .hContent').html(data);}).fail(function(xhr,textStatus,errorThrown){$("#"+wid+' .hContent').html('<blockquote style="margin-top:20px;margin-left:20px;">File not found!</blockquote>');});$(this).parent().fadeOut('fast');return false;});$('ul.submenu.submenu-close').hide();$('.icon-folder-close,.icon-folder-show, .icon-search').tooltip({delay:{show:2000,hide:0},placement:"bottom"});$('ul#subnets').on("click",".fa-folder-close-o",function(){$(this).removeClass('fa-folder-close-o').addClass('fa-folder-open-o');$(this).nextAll('.submenu').slideDown('fast');});$('ul#subnets').on("click",".fa-folder",function(){$(this).removeClass('fa-folder').addClass('fa-folder-open');$(this).nextAll('.submenu').slideDown('fast');});$('ul#subnets').on("click",".fa-folder-open-o",function(){$(this).removeClass('fa-folder-open-o').addClass('fa-folder-close-o');$(this).nextAll('.submenu').slideUp('fast');});$('ul#subnets').on("click",".fa-folder-open",function(){$(this).removeClass('fa-folder-open').addClass('fa-folder');$(this).nextAll('.submenu').slideUp('fast');});$('#hideSubnets').click(function(){$('#leftMenu').hide('fast');$('#content').css("width","97.9147%");return false;});$('#expandfolders').click(function(){var action=$(this).attr('data-action');if(action=='close'){$('.subnets ul#subnets li.folder > i').removeClass('fa-folder-close-o').addClass('fa-folder-open-o');$('.subnets ul#subnets li.folderF > i').removeClass('fa-folder').addClass('fa-folder-open');$('.subnets ul#subnets ul.submenu').removeClass('submenu-close').addClass('submenu-open').slideDown('fast');$(this).attr('data-action','open');createCookie('expandfolders','1','365');$(this).removeClass('fa-expand').addClass('fa-compress');}
else{$('.subnets ul#subnets li.folder > i').addClass('fa-folder-close-o').removeClass('fa-folder-open-o');$('.subnets ul#subnets li.folderF > i').addClass('fa-folder').removeClass('fa-folder-open');$('.subnets ul#subnets ul.submenu').addClass('submenu-close').removeClass('submenu-open').slideUp('fast');$(this).attr('data-action','close');createCookie('expandfolders','0','365');$(this).removeClass('fa-compress').addClass('fa-expand');}});$(document).on("click",".modIPaddr",function(){showSpinner();var action=$(this).attr('data-action');var id=$(this).attr('data-id');var subnetId=$(this).attr('data-subnetId');var stopIP=$(this).attr('data-stopIP');var postdata="action="+action+"&id="+id+"&subnetId="+subnetId+"&stopIP="+stopIP;$.post('site/ipaddr/modifyIpAddress.php',postdata,function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","a.moveIPaddr",function(){showSpinner();var action=$(this).attr('data-action');var id=$(this).attr('data-id');var subnetId=$(this).attr('data-subnetId');var postdata="action="+action+"&id="+id+"&subnetId="+subnetId;$.post('site/ipaddr/moveIpAddress.php',postdata,function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#refreshHostname",function(){showSpinner();var ipaddress=$('input.ip_addr').val();$.post('site/tools/resolveDNS.php',{ipaddress:ipaddress},function(data){if(data.length!==0){$('input[name=dns_name]').val(data);}
hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","button#editIPAddressSubmit, .editIPSubmitDelete",function(){showSpinner();var postdata=$('form.editipaddress').serialize();if($(this).attr('id')=="editIPSubmitDelete"){postdata+="&deleteconfirm=yes&action=delete";}
if($(this).attr('data-action')=="all-delete"){postdata+='&action-visual=delete';}
$.post('site/ipaddr/modifyIpAddressCheck.php',postdata,function(data){$('div.addnew_check').html(data);$('div.addnew_check').slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(".ping_ipaddress").click(function(){showSpinner();var id=$(this).attr('data-id');var subnetId=$(this).attr('data-subnetId');$.post('site/ipaddr/pingCheck.php',{id:id,subnetId:subnetId},function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('a.mail_ipaddress').click(function(){var IPid=$(this).attr('data-id');$.post('site/ipaddr/mailNotifyIP.php',{id:IPid},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#mailIPAddressSubmit",function(){showSpinner();var mailData=$('form#mailNotify').serialize();$.post('site/ipaddr/mailNotifyCheck.php',mailData,function(data){$('div.sendmail_check').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){hidePopups();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","table.ipaddresses th a.sort",function(){showSpinner();$(this).tooltip('hide');var direction=$(this).attr('data-id');var subnetId=$(this).attr('data-subnetId');$.post('site/ipaddr/ipAddressPrintTable.php',{direction:direction,subnetId:subnetId},function(data){$('div.ipaddresses_overlay').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('a.scan_subnet').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post('site/ipaddr/scan/subnetScan.php',{subnetId:subnetId},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('change',"select#scanType",function(){var pingType=$('select[name=scanType]').find(":selected").val();if(pingType=="DiscoveryTelnet"){$('tbody#telnetPorts').show();}
else{$('tbody#telnetPorts').hide();}});$(document).on('click','#subnetScanSubmit',function(){showSpinner();var subnetId=$(this).attr('data-subnetId');var pingType=$('select[name=scanType]').find(":selected").val();if($('input[name=debug]').is(':checked')){var debug=1;}
else{var debug=0;}
var port=$('input[name=telnetports]').val();$('#alert-scan').slideUp('fast');$.post('site/ipaddr/scan/subnetScan'+pingType+".php",{subnetId:subnetId,pingType:pingType,debug:debug,port:port},function(data){$('#subnetScanResult').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('click','.resultRemove',function(){var target=$(this).attr('data-target');$('tr.'+target).remove();return false;});$(document).on('click','a#saveScanResults',function(){showSpinner();var script=$(this).attr('data-script');var subnetId=$(this).attr('data-subnetId');var postData=$('form.'+script+"Form").serialize();var postData=postData+"&subnetId="+subnetId;$.post('site/ipaddr/scan/subnetScan'+script+"Result.php",postData,function(data){$('#subnetScanAddResult').html(data);if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('a.csvImport').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post('site/admin/CSVimport.php',{subnetId:subnetId},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","input#csvimportcheck",function(){showSpinner();var filetype=$('span.fname').html();$.post('site/admin/CSVimportShowFile.php',{filetype:filetype},function(data){$('div.csvimportverify').html(data).slideDown('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","input#csvImportNo",function(){$('div.csvimportverify').hide('fast');});$(document).on("click","input#csvImportYes",function(){showSpinner();var filetype=$('span.fname').html();var xlsSubnetId=$('a.csvImport').attr('data-subnetId');var postData="subnetId="+xlsSubnetId+"&filetype="+filetype;$.post('site/admin/CSVimportSubmit.php',postData,function(data){$('div.csvImportResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","#csvtemplate",function(){$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='site/admin/csvtemplate.php'></iframe></div>");return false;});$('a.csvExport').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post('site/ipaddr/exportSelectFields.php',{subnetId:subnetId},function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button#exportSubnet",function(){var subnetId=$('a.csvExport').attr('data-subnetId');var exportFields=$('form#selectExportFields').serialize();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='site/admin/exportSubnet.php?subnetId="+subnetId+"&"+exportFields+"'></iframe></div>");return false;});$(document).on('click','a.editFavourite',function(){var subnetId=$(this).attr('data-subnetId');var action=$(this).attr('data-action');var from=$(this).attr('data-from');var item=$(this);$.post('site/tools/favouriteEdit.php',{subnetId:subnetId,action:action,from:from},function(data){if(data=='success'&&from=='widget'){$('tr.favSubnet-'+subnetId).addClass('error');$('tr.favSubnet-'+subnetId).delay(200).fadeOut();}
else if(data=='success'){$(this).toggleClass('btn-info');$('a.favourite-'+subnetId+" i").toggleClass('fa-star-o');$(item).toggleClass('btn-info');if(action=="remove"){$('a.favourite-'+subnetId).attr('data-original-title','Click to add to favourites');$(item).attr('data-action','add');}
else{$('a.favourite-'+subnetId).attr('data-original-title','Click to remove from favourites');$(item).attr('data-action','remove');}}
else{$('div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('a.request_ipaddress').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post('site/tools/requestIPform.php',{subnetId:subnetId},function(data){$('div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","select#subnetId",function(){showSpinner();var subnetId=$('select#subnetId option:selected').attr('value');$.post('site/login/requestIPfirstFree.php',{subnetId:subnetId},function(data){$('input.ip_addr').val(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","button#requestIPAddressSubmit",function(){showSpinner();var request=$('form#requestIP').serialize();$.post('site/login/requestIPresult.php',request,function(data){$('div#requestIPresult').html(data).slideDown('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('form#ipCalc').submit(function(){showSpinner();var ipCalcData=$(this).serialize();$.post('site/tools/ipCalcResult.php',ipCalcData,function(data){$('div.ipCalcResult').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('form#ipCalc input.reset').click(function(){$('form#ipCalc input[type="text"]').val('');$('div.ipCalcResult').fadeOut('fast');});$('.searchSubmit').click(function(){showSpinner();var ip=$('.searchInput').val();if($('#searchSelect input[name=addresses]').is(":checked")){var addresses="on";}
else{var addresses="off";}
if($('#searchSelect input[name=subnets]').is(":checked")){var subnets="on";}
else{var subnets="off";}
if($('#searchSelect input[name=vlans]').is(":checked")){var vlans="on";}
else{var vlans="off";}
var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){var base=$('.iebase').html();}
else{var base="";}
var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){window.location=base+"tools/search/"+addresses+"/"+subnets+"/"+vlans+"/"+ip;}
else{window.location=base+"?page=tools&section=search&addresses="+addresses+"&subnets="+subnets+"&vlans="+vlans+"&ip="+ip;}
return false;});$('form#userMenuSearch').submit(function(){showSpinner();var ip=$('.searchInput').val();if($('#searchSelect input[name=addresses]').is(":checked")){var addresses="on";}
else{var addresses="off";}
if($('#searchSelect input[name=addresses]').is(":checked")){var subnets="on";}
else{var subnets="off";}
if($('#searchSelect input[name=addresses]').is(":checked")){var vlans="on";}
else{var vlans="off";}
var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){var base=$('.iebase').html();}
else{var base="";}
var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){window.location=base+"tools/search/"+addresses+"/"+subnets+"/"+vlans+"/"+ip;}
else{window.location=base+"?page=tools&section=search&addresses="+addresses+"&subnets="+subnets+"&vlans="+vlans+"&ip="+ip;}
return false;});$(document).on("mouseenter","#userMenuSearch",function(event){var object1=$("#searchSelect");object1.slideDown('fast');});$(document).on("mouseleave",'#user_menu',function(event){$(this).stop();var object1=$("#searchSelect");object1.slideUp();});$('form#search').submit(function(){showSpinner();var ip=$('form#search .search').val();var postData=$(this).serialize();$.post('site/tools/searchResults.php',postData,function(data){$('div.searchResult').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('a#exportSearch').click(function(){var searchTerm=$('form#search .search').val();$("div.dl").remove();$('div.exportDIVSearch').append("<div style='display:none' class='dl'><iframe src='site/tools/searchResultsExport.php?searchTerm="+searchTerm+"'></iframe></div>");return false;});$('#hosts').submit(function(){showSpinner();var hostname=$('input.hostsFilter').val();var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){window.location=base+"tools/hosts/"+hostname;}
else{window.location=base+"?page=tools&section=hosts&ip="+hostname;}
return false;});$('form#userModSelf').submit(function(){var selfdata=$(this).serialize();$('div.userModSelfResult').hide();$.post('site/tools/userMenuSelfMod.php',selfdata,function(data){$('div.userModSelfResult').html(data).fadeIn('fast').delay(2000).fadeOut('slow');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#randomPassSelf",function(){var password=randomPass();$('input.userPass').val(password);$('#userRandomPass').html(password);return false;});$('form#cform').submit(function(){showSpinner();var limit=$('form#cform .climit').val();var filter=$('form#cform .cfilter').val();var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){window.location="tools/changelog/"+filter+"/"+limit+"/";}
else{window.location="?page=tools&section=changelog&subnetId="+filter+"&sPage="+limit;}
return false;});$('form#changePassRequiredForm').submit(function(){showSpinner();var ipampassword1=$('#ipampassword1',this).val();var ipampassword2=$('#ipampassword2',this).val();var postData="ipampassword1="+ipampassword1+"&ipampassword2="+ipampassword2;$.post('site/tools/changePassRequiredResult.php',postData,function(data){$('div#changePassRequiredResult').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","table#switchManagement th a.sort",function(){showSpinner();$(this).tooltip('hide');var direction=$(this).attr('data-id');$.post('site/tools/devicesPrint.php',{direction:direction},function(data){$('div.devicePrintHolder').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('submit',"#deviceFilter",function(){var searchData=$(this).serialize();$.post('site/tools/devicesPrint.php',searchData,function(data){$('div.devicePrintHolder').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#settings').submit(function(){showSpinner();var settings=$(this).serialize();$.post('site/admin/settingsEdit.php',settings,function(data){$('div.settingsEdit').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1000);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#mailsettings').submit(function(){showSpinner();var settings=$(this).serialize();$.post('site/admin/mailSettingsEdit.php',settings,function(data){$('div.settingsMailEdit').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1000);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('select#mtype').change(function(){var type=$(this).find(":selected").val();if(type==="localhost"){$('#mailsettingstbl tbody#smtp').hide();}
else{$('#mailsettingstbl tbody#smtp').show();}});$('.sendTestMail').click(function(){showSpinner();var settings=$('form#mailsettings').serialize();$.post('site/admin/mailSettingsTestMail.php',settings,function(data){$('div.settingsMailEdit').html(data).slideDown('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.editUser').click(function(){showSpinner();var id=$(this).attr('data-userid');var action=$(this).attr('data-action');$.post('site/admin/usersEditPrint.php',{id:id,action:action},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editUserSubmit",function(){showSpinner();var loginData=$('form#usersEdit').serialize();$.post('site/admin/usersEditResult.php',loginData,function(data){$('div.usersEditResult').html(data).show();if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("change","select#domainUser",function(){var type=$(this).val();if(type=="1"){$('input.userPass').attr('disabled','');}
else{$('input.userPass').removeAttr('disabled');}});$(document).on("click","a#randomPass",function(){var password=randomPass();$('input.userPass').val(password);$(this).html(password);return false;});$(document).on("click",".adsearchuser",function(){$('div.popup_w500').load('site/admin/userADsearchForm.php');showPopup('popup_w500');$('.popup_w700').css("z-index","99");hideSpinner();});$(document).on("click","#adsearchusersubmit",function(){showSpinner();var dname=$('#dusername').val();$.post('site/admin/userADsearchResult.php',{dname:dname},function(data){$('div#adsearchuserresult').html(data)
hideSpinner();});});$(document).on("click",".userselect",function(){var uname=$(this).attr('data-uname');var username=$(this).attr('data-username');var email=$(this).attr('data-email');$('form#usersEdit input[name=real_name]').val(uname);$('form#usersEdit input[name=username]').val(username);$('form#usersEdit input[name=email]').val(email);hidePopup2();hidePopup('popup_w500');return false;});$('.editGroup').click(function(){showSpinner();var id=$(this).attr('data-groupid');var action=$(this).attr('data-action');$.post('site/admin/groupEditPrint.php',{id:id,action:action},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editGroupSubmit",function(){showSpinner();var loginData=$('form#groupEdit').serialize();$.post('site/admin/groupEditResult.php',loginData,function(data){$('div.groupEditResult').html(data).show();if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.addToGroup').click(function(){showSpinner();var g_id=$(this).attr('data-groupid');$.post('site/admin/groupAddUsers.php',{g_id:g_id},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#groupAddUsersSubmit",function(){showSpinner();var users=$('#groupAddUsers').serialize();$.post('site/admin/groupAddUsersResult.php',users,function(data){$('div.groupAddUsersResult').html(data).show();if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.removeFromGroup').click(function(){showSpinner();var g_id=$(this).attr('data-groupid');$.post('site/admin/groupRemoveUsers.php',{g_id:g_id},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#groupRemoveUsersSubmit",function(){showSpinner();var users=$('#groupRemoveUsers').serialize();$.post('site/admin/groupRemoveUsersResult.php',users,function(data){$('div.groupRemoveUsersResult').html(data).show();if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('form#ad').submit(function(){showSpinner();var addata=$(this).serialize();$.post('site/admin/manageADresult.php',addata,function(data){$('div.manageADresult').html(data).slideDown('fast').delay(2000).fadeOut('slow');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#checkAD').click(function(){showSpinner();var addata=$('form#ad').serialize();$.post('site/admin/manageADcheck.php',addata,function(data){$('div.manageADresult').html(data).slideDown('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#instructionsForm').submit(function(){var instructions=CKEDITOR.instances.instructions.getData();$('div.instructionsPreview').hide('fast');showSpinner();$.post('site/admin/instructionsResult.php',{instructions:instructions},function(data){$('div.instructionsResult').html(data).fadeIn('fast');if(data.search("alert-danger")==-1){$('div.instructionsResult').delay(2000).fadeOut('slow');hideSpinner();}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#preview').click(function(){showSpinner();var instructions=CKEDITOR.instances.instructions.getData();$.post('site/admin/instructionsPreview.php',{instructions:instructions},function(data){$('div.instructionsPreview').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('form#logs').change(function(){showSpinner();var logSelection=$('form#logs').serialize();$.post('site/admin/logResult.php',logSelection,function(data){$('div.logs').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","a.openLogDetail",function(){var id=$(this).attr('data-logid');$.post('site/admin/logDetail.php',{id:id},function(data){$('div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#logDirection button').click(function(){showSpinner();var logSelection=$('form#logs').serialize();var direction=$(this).attr('data-direction');var lastId;if(direction=="next"){lastId=$('table#logs tr:last').attr('id');}
else{lastId=$('table#logs tr:nth-child(2)').attr('id');}
var postData=logSelection+"&direction="+direction+"&lastId="+lastId;$.post('site/admin/logResult.php',postData,function(data1){$('div.logs').html(data1);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#downloadLogs').click(function(){showSpinner();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='site/admin/logsExport.php'></iframe></div>");hideSpinner();$('div.logs').prepend("<div class='alert alert-info' id='logsInfo'><i class='icon-remove icon-gray selfDestruct'></i> Preparing download... </div>");return false;});$('#clearLogs').click(function(){showSpinner();$.post('site/admin/logClear.php',function(data){$('div.logs').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.editSection').click(function(){showSpinner();var sectionId=$(this).attr('data-sectionid');var action=$(this).attr('data-action');$.post("site/admin/manageSectionEdit.php",{sectionId:sectionId,action:action},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","#editSectionSubmit, .editSectionSubmitDelete",function(){showSpinner();var sectionData=$('form#sectionEdit').serialize();if($(this).attr('id')=="editSectionSubmitDelete"){sectionData+="&deleteconfirm=yes";};$.post('site/admin/manageSectionEditResult.php',sectionData,function(data){$('div.sectionEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.sectionOrder').click(function(){showSpinner();$.post("site/admin/manageSectionOrder.php",function(data){$('div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#sectionOrderSubmit",function(){showSpinner();var m=0;var lis=$('#sortableSec li').map(function(i,n){var pindex=$(this).index()+1;return $(n).attr('id')+":"+pindex;}).get().join(';');$.post('site/admin/manageSectionOrderResult.php',{position:lis},function(data){$('.sectionOrderResult').html(data).fadeIn('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('table#manageSubnets button[id^="subnet-"]').click(function(){showSpinner();var swid=$(this).attr('id');if($('#content-'+swid).is(':visible')){$(this).children('i').removeClass('fa-angle-down').addClass('fa-angle-right');}
else{$(this).children('i').removeClass('fa-angle-right').addClass('fa-angle-down');}
$('table#manageSubnets tbody#content-'+swid).slideToggle('fast');hideSpinner();});$('#toggleAllSwitches').click(function(){showSpinner();if($(this).children().hasClass('fa-compress')){$(this).children().removeClass('fa-compress').addClass('fa-expand');$('table#manageSubnets i.fa-angle-down').removeClass('fa-angle-down').addClass('fa-angle-right');$('table#manageSubnets tbody[id^="content-subnet-"]').hide();createCookie('showSubnets',0,30);}
else{$(this).children().removeClass('fa-expand').addClass('fa-compress');$('table#manageSubnets tbody[id^="content-subnet-"]').show();$('table#manageSubnets i.fa-angle-right').removeClass('fa-angle-right').addClass('fa-angle-down');createCookie('showSubnets',1,30);}
hideSpinner();});$('button.editSubnet').click(function(){showSpinner();var sectionId=$(this).attr('data-sectionid');var subnetId=$(this).attr('data-subnetid');var action=$(this).attr('data-action');var postdata="sectionId="+sectionId+"&subnetId="+subnetId+"&action="+action;$.post("site/admin/manageSubnetEdit.php",postdata,function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","#resize, #split, #truncate",function(){showSpinner();var action=$(this).attr('id');var subnetId=$(this).attr('data-subnetId');$.post("site/admin/manageSubnet"+action+".php",{action:action,subnetId:subnetId},function(data){$('div.popup_w500').html(data);showPopup('popup_w500');$('.popup_w700').css("z-index","99");hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button#subnetResizeSubmit",function(){showSpinner();var resize=$('form#subnetResize').serialize();$.post("site/admin/manageSubnetResizeSave.php",resize,function(data){$('div.subnetResizeResult').html(data);if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button#subnetSplitSubmit",function(){showSpinner();var split=$('form#subnetSplit').serialize();$.post("site/admin/manageSubnetSplitSave.php",split,function(data){$('div.subnetSplitResult').html(data);if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button#subnetTruncateSubmit",function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post("site/admin/manageSubnetTruncateSave.php",{subnetId:subnetId},function(data){$('div.subnetTruncateResult').html(data);if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("submit","#editSubnetDetails",function(){alert('test');hideSpinner();return false;});$(document).on("click",".editSubnetSubmit, .editSubnetSubmitDelete",function(){showSpinner();var subnetData=$('form#editSubnetDetails').serialize();if($(this).hasClass("editSubnetSubmitDelete")){subnetData=subnetData.replace("action=edit","action=delete");}
if($(this).attr('id')=="editSubnetSubmitDelete"){subnetData+="&deleteconfirm=yes";};$.post("site/admin/manageSubnetEditResult.php",subnetData,function(data){$('div.manageSubnetEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){showSpinner();var sectionId;var subnetId;var parameter;if(subnetData.search("IPaddresses")!=-1){sectionId=$('form#editSubnetDetails input[name=sectionId]').val();subnetId=$('form#editSubnetDetails input[name=subnetId]').val();setTimeout(function(){window.location.reload();},1500);}
else if(subnetData.search("freespace")!=-1){setTimeout(function(){window.location.reload();},1500);}
else if(subnetData.search("ipcalc")!=-1){}
else{setTimeout(function(){window.location.reload();},1500);}}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#get-ripe",function(){showSpinner();var subnet=$('form#editSubnetDetails input[name=subnet]').val();$.getJSON("site/admin/manageSubnetEditRipeQuery.php",{subnet:subnet},function(data){dcnt=0;$.each(data,function(key,val){if(key=="Error"){$('div.popup_w500').html("<div class='pHeader'>Error</div><div class='pContent'><div class='alert alert-warning'>"+val+"</div></div><div class='pFooter'><button class='btn btn-sm btn-default hidePopup2'>Close</button></div>");showPopup('popup_w500');$('popup_w700').css("z-index","99");hideSpinner();}else{if($('form#editSubnetDetails #field-'+key).length){$('form#editSubnetDetails #field-'+key).val(val);dcnt++;}}});if(dcnt===0){var ripenote="<div class='pHeader'>Cannot find matched fileds!</div><div class='pContent'>";$.each(data,function(key,val){ripenote+=key+": "+val+"<br>";})
ripenote+="</div><div class='pFooter'><button class='btn btn-sm btn-default hidePopup2'>Close</button></div>";$('div.popup_w500').html(ripenote);showPopup('popup_w500');}
hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.showSubnetPerm').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');var sectionId=$(this).attr('data-sectionId');$.post("site/admin/manageSubnetShowPermissions.php",{subnetId:subnetId,sectionId:sectionId},function(data){$('div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editSubnetPermissionsSubmit",function(){showSpinner();var perms=$('form#editSubnetPermissions').serialize();$.post('site/admin/manageSubnetPermissionsSubmit.php',perms,function(data){$('.editSubnetPermissionsResult').html(data);if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#createSubnetFromCalc",function(){$('tr#selectSection').show();});$(document).on("change","select#selectSectionfromIPCalc",function(){var sectionId=$(this).val();var subnet=$('table.ipCalcResult td#sub2').html();var bitmask=$('table.ipCalcResult td#sub4').html();var postdata="sectionId="+sectionId+"&subnet="+subnet+"&bitmask="+bitmask+"&action=add&location=ipcalc";$('table.newSections ul#sections li#'+sectionId).addClass('active');$.post('site/admin/manageSubnetEdit.php',postdata,function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click",".createfromfree",function(){var sectionId=$(this).attr('data-sectionId');var cidr=$(this).attr('data-cidr');var freespaceMSISD=$(this).attr('data-masterSubnetId');var cidrArr=cidr.split('/');var subnet=cidrArr[0];var bitmask=cidrArr[1];var postdata="sectionId="+sectionId+"&subnet="+subnet+"&bitmask="+bitmask+"&freespaceMSID="+freespaceMSISD+"&action=add&location=ipcalc";$.post('site/admin/manageSubnetEdit.php',postdata,function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",'.edit_subnet, button.edit_subnet, button#add_subnet',function(){var subnetId=$(this).attr('data-subnetId');var sectionId=$(this).attr('data-sectionId');var action=$(this).attr('data-action');var postdata="sectionId="+sectionId+"&subnetId="+subnetId+"&action="+action+"&location=IPaddresses";$.post('site/admin/manageSubnetEdit.php',postdata,function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("change","select[name=vlanId]",function(){var vlanId=$(this).val();if(vlanId=='Add'){showSpinner();$.post('site/admin/manageVLANEdit.php',{action:"add",fromSubnet:"true"},function(data){$('div.popup_w400').html(data);showPopup('popup_w400');$('.popup_w700').css("z-index","99");hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}
return false;});$(document).on("click",".vlanManagementEditFromSubnetButton",function(){showSpinner();var postData=$('form#vlanManagementEditFromSubnet').serialize();$.post('site/admin/manageVLANEditResult.php',postData,function(data){$('div.vlanManagementEditFromSubnetResult').html(data).show();if(data.search("alert-danger")==-1){var vlanId=$('#vlanidforonthefly').html();$.post('site/admin/manageSubnetEditPrintVlanDropdown.php',{vlanId:vlanId},function(data){$('.editSubnetDetails td#vlanDropdown').html(data);$('.popup_w700').delay(1000).css("z-index","101");hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});setTimeout(function(){hidePopup('popup_w400');parameter=null;},1000);}
else{hideSpinner();}});return false;});$('#add_folder, .add_folder').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');var sectionId=$(this).attr('data-sectionId');var action=$(this).attr('data-action');var postdata="sectionId="+sectionId+"&subnetId="+subnetId+"&action="+action+"&location=IPaddresses";$.post('site/admin/manageFolderEdit.php',postdata,function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editFolderSubmit",function(){showSpinner();var postData=$('form#editFolderDetails').serialize();$.post('site/admin/manageFolderEditSubmit.php',postData,function(data){$('.manageFolderEditResult').html("").html(data);if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editFolderSubmitDelete",function(){showSpinner();var subnetId=$(this).attr('data-subnetId');var description=$('form#editFolderDetails #field-description').val();var postData="subnetId="+subnetId+"&description="+description+"&action=delete";if($(this).attr('id')=="editFolderSubmitDelete"){postData+="&deleteconfirm=yes";};$.post('site/admin/manageFolderEditSubmit.php',postData,function(data){$('.manageFolderEditResult').html(data);if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.editSwitch').click(function(){showSpinner();var switchId=$(this).attr('data-switchid');var action=$(this).attr('data-action');$.post('site/admin/manageDevicesEdit.php',{switchId:switchId,action:action},function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editSwitchsubmit",function(){showSpinner();var switchdata=$('form#switchManagementEdit').serialize();$.post('site/admin/manageDevicesEditResult.php',switchdata,function(data){$('div.switchManagementEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.editDevType').click(function(){showSpinner();var tid=$(this).attr('data-tid');var action=$(this).attr('data-action');$.post('site/admin/manageDeviceTypeEdit.php',{tid:tid,action:action},function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editDevTypeSubmit",function(){showSpinner();var switchdata=$('form#devTypeEdit').serialize();$.post('site/admin/manageDeviceTypeEditResult.php',switchdata,function(data){$('div.devTypeEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editVLAN",function(){showSpinner();var vlanId=$(this).attr('data-vlanid');var action=$(this).attr('data-action');if($(this).attr("data-number")){var vlanNum=$(this).attr('data-number');}
else{var vlanNum="";}
$.post('site/admin/manageVLANEdit.php',{vlanId:vlanId,action:action,vlanNum:vlanNum},function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editVLANsubmit",function(){showSpinner();var vlandata=$('form#vlanManagementEdit').serialize();$.post('site/admin/manageVLANEditResult.php',vlandata,function(data){$('div.vlanManagementEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.vrfManagement').click(function(){showSpinner();var vrfId=$(this).attr('data-vrfid');var action=$(this).attr('data-action');var switchpost="vrfId="+vrfId+"&action="+action;$.post('site/admin/manageVRFEdit.php',switchpost,function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editVRF",function(){showSpinner();var vrfdata=$('form#vrfManagementEdit').serialize();$.post('site/admin/manageVRFEditResult.php',vrfdata,function(data){$('div.vrfManagementEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",'table#requestedIPaddresses button',function(){showSpinner();var requestId=$(this).attr('data-requestid');$.post('site/admin/manageRequestEdit.php',{requestId:requestId},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button.manageRequest",function(){showSpinner();var postValues=$('form.manageRequestEdit').serialize();var action=$(this).attr('data-action');var postData=postValues+"&action="+action;$.post('site/admin/manageRequestResult.php',postData,function(data){$('div.manageRequestResult').html(data);if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('form#ripeImport').submit(function(){showSpinner();var as=$(this).serialize();$.post('site/admin/ripeImportTelnet.php',as,function(data){$('div.ripeImportTelnet').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","table.asImport .removeSubnet",function(){$(this).parent('tr').remove();hideTooltips();});$(document).on("submit","form#asImport",function(){showSpinner();var importData=$(this).serialize();$.post('site/admin/ripeImportResult.php',importData,function(data){$('div.ripeImportResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){$('table.asImport').delay(1000).fadeOut('fast');hideSpinner();}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button#filterIPSave').click(function(){showSpinner();var addata=$('form#filterIP').serialize();$.post('site/admin/filterIPFieldsResult.php',addata,function(data){$('div.filterIPResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){$('div.filterIPResult').delay(2000).fadeOut('slow');hideSpinner();}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".edit-custom-field",function(){showSpinner();var action=$(this).attr('data-action');var fieldName=$(this).attr('data-fieldname');var table=$(this).attr('data-table');$.post('site/admin/customFieldsEdit.php',{action:action,fieldName:fieldName,table:table},function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editcustomSubmit",function(){showSpinner();var field=$('form#editCustomFields').serialize();$.post('site/admin/customFieldsEditResult.php',field,function(data){$('div.customEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('table.customIP button.down').click(function(){showSpinner();var current=$(this).attr('data-fieldname');var next=$(this).attr('data-nextfieldname');var table=$(this).attr('data-table');$.post('site/admin/customFieldsOrder.php',{current:current,next:next,table:table},function(data){$('div.'+table+'-order-result').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1000);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.edit-custom-filter').click(function(){showSpinner();var table=$(this).attr('data-table');$.post('site/admin/customFieldsFilter.php',{table:table},function(data){$('div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editcustomFilterSubmit",function(){showSpinner();var field=$('form#editCustomFieldsFilter').serialize();$.post('site/admin/customFieldsFilterResult.php',field,function(data){$('div.customEditFilterResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.lang').click(function(){showSpinner();var langid=$(this).attr('data-langid');var action=$(this).attr('data-action');$.post('site/admin/languageEdit.php',{langid:langid,action:action},function(data){$('div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#langEditSubmit",function(){showSpinner();var ldata=$('form#langEdit').serialize();$.post('site/admin/languageEditResult.php',ldata,function(data){$('div.langEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.wedit').click(function(){showSpinner();var wid=$(this).attr('data-wid');var action=$(this).attr('data-action');$.post('site/admin/widgetEdit.php',{wid:wid,action:action},function(data){$('div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#widgetEditSubmit",function(){showSpinner();var ldata=$('form#widgetEdit').serialize();$.post('site/admin/widgetEditResult.php',ldata,function(data){$('div.widgetEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.editAPI').click(function(){showSpinner();var appid=$(this).attr('data-appid');var action=$(this).attr('data-action');$.post('site/admin/apiEdit.php',{appid:appid,action:action},function(data){$('div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#apiEditSubmit",function(){showSpinner();var apidata=$('form#apiEdit').serialize();$.post('site/admin/apiEditResult.php',apidata,function(data){$('div.apiEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('click',"#regApiKey",function(){showSpinner();$.post('site/admin/apiKeyGenerate.php',function(data){$('input#appcode').val(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button#searchReplaceSave').click(function(){showSpinner();var searchData=$('form#searchReplace').serialize();$.post('site/admin/searchReplaceResult.php',searchData,function(data){$('div.searchReplaceResult').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button#XLSdump').click(function(){showSpinner();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='site/admin/exportGenerateXLS.php'></iframe></div>");hideSpinner();});$('button#MySQLdump').click(function(){showSpinner();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='site/admin/exportGenerateMySQL.php'></iframe></div>");hideSpinner();});$('button#hostfileDump').click(function(){showSpinner();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='site/admin/exportGenerateHostDump.php'></iframe></div>");hideSpinner();});$(document).on('click','.btn-tablefix',function(){var tableid=$(this).attr('data-tableid');var fieldid=$(this).attr('data-fieldid');var type=$(this).attr('data-type');$.post('site/admin/verifyDatabaseFix.php',{tableid:tableid,fieldid:fieldid,type:type},function(data){$('div#fix-result-'+tableid+fieldid).html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});return false;});